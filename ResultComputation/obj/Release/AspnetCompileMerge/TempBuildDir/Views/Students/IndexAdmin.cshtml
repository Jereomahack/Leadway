@*@model IEnumerable<ResultComputation.Models.Student>*@
@model PagedList.IPagedList<LightWay.Models.Student>
@using PagedList.Mvc;
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

@{
    ViewBag.Title = "Index";
}



<div class="panel panel-primary">
    <div class="panel-heading">LIST OF ALL STUDENTS</div>
    <div class="panel-body">
        <p>
            @Html.ActionLink("Create New", "Create", null, new { @class = "btn btn-primary btn-sm" })
        </p>
        <div class="row">
            @if (ViewBag.Number != null)
            {
                <div>
                    <div class="alert alert-success alert-dismissible" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <p style="color:green;text-align:center;font-size:20px"> Successful! Student Admission Number is :<span style="color:red;font-size:30px">@ViewBag.Number</span></p>

                    </div>
                </div>
            }
            <div class="col-lg-12">

                @using (Html.BeginForm("IndexAdmin", "Students", new { @class = "form-horizontal" }))
                {


                    @*<h2><b><span style="color:darkseagreen;font-family:Calibri;font-size:large">Index for Student Registration</span></b></h2>*@
                    <p class="col-md-4 pull-right">
                        Seach By student Full Name,student Number and Class, @Html.TextBox("searchString", ViewBag.CurrentFilter as string, new { @class = "form-control" })
                        <input type="submit" value="Search" class="btn btn-info" />
                    </p>

                    <br />
                    <br />
                    <br />




                }
                <table class="table table-hover table-bordered table-responsive table-condensed">
                    <tr>
                        <th>
                            Student Number
                        </th>
                        <th>
                            SurName
                        </th>
                        <th>
                            Other Names
                        </th>
                        <th>
                            Class
                        </th>
                        <th>
                            Gender
                        </th>
                        <th>
                            DOB
                        </th>
                    </tr>

                    @foreach (var item in Model)
                    {
                        <tr class="info">
                            @if (item.Transistion == "Yes")
                            {

                                <td style="color:red">
                                    @Html.DisplayFor(modelItem => item.StudentNumber)
                                </td>
                                <td style="color:red">
                                    @Html.DisplayFor(modelItem => item.Surname)
                                </td>
                                <td style="color:red">
                                    @Html.DisplayFor(modelItem => item.OtherName)
                                </td>
                                <td style="color:red">
                                    @Html.DisplayFor(modelItem => item.Class)
                                </td>
                                <td style="color:red">
                                    @Html.DisplayFor(modelItem => item.Gender)
                                </td>
                                <td style="color:red">
                                    @Html.DisplayFor(modelItem => item.DOB)
                                </td>
                                <td style="color:red">
                                    @Html.DisplayFor(modelItem => item.Transistion)
                                </td>
                            }
                            else
                            {
                                <td>
                                    @Html.DisplayFor(modelItem => item.StudentNumber)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Surname)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.OtherName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Class)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Gender)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.DOB)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Transistion)
                                </td>
                            }


                            <td>
                                @if (User.IsInRole("Admin"))
                                {
                                    @Html.ActionLink(" ", "Details", new { id = item.Id }, new { @class = "btn btn-primary btn-xs glyphicon glyphicon-open-file", @title = "Detail" })
                                    @Html.ActionLink(" ", "Edit", new { id = item.Id }, new { @class = "btn btn-warning btn-xs  glyphicon glyphicon-edit", @title = "Edit" })
                                    @Html.ActionLink(" ", "Delete", new { id = item.Id }, new { @class = "btn btn-danger btn-xs  glyphicon glyphicon-trash", @title = "Delete" })
                                    @Html.ActionLink(" ", "StudentTransistions", new { id = item.Id }, new { @class = "btn btn-info btn-xs  glyphicon glyphicon-stop", @title = "Transistion" })
                                    @Html.ActionLink(" ", "Promotion", new { id = item.Id }, new { @class = "btn btn-success btn-xs  glyphicon glyphicon-ok", @title = "Promote" })
                                }
                                else if (User.IsInRole("Accountant"))
                                {

                                    @Html.ActionLink("View", "Details", new { id = item.Id }, new { @class = "btn btn-warning btn-xs" })
                                    @Html.ActionLink("Transport", "Create", "TransportMembers", new { id = item.Id }, new { @class = "btn btn-info btn-xs" })
                                    @Html.ActionLink("Hostel", "Create", "HostelMembers", new { id = item.Id }, new { @class = "btn btn-sucess btn-xs" })
                                    @Html.ActionLink("Fees", "Create", "Payments", new { id = item.Id }, new { @class = "btn btn-primary btn-xs" })
                                }
                                else
                                {
                                    @Html.ActionLink("View", "Details", new { id = item.Id }, new { @class = "btn btn-primary btn-xs" })
                                }
                            </td>
                        </tr>
                    }

                </table>


                <br />
                Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

                @Html.PagedListPager(Model, page => Url.Action("IndexAdmin",
                            new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
            </div>
        </div>
    </div>
</div>

