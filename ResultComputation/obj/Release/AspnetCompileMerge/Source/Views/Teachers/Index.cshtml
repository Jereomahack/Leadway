@*@model IEnumerable<ResultComputation.Models.Teachers>
*@
@model PagedList.IPagedList<LightWay.Models.Teachers>
@using PagedList.Mvc;
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

@{
    ViewBag.Title = "Index";
}


<div class="panel panel-primary">
    <div class="panel-heading">LIST OF TEACHERS</div>
    <div class="panel-body">
        <div class="row">
            <div class="col-lg-12">
                @if (User.IsInRole("Admin"))
                {
                    <p>
                        @Html.ActionLink("Create New", "Create")
                    </p>
                }
                @using (Html.BeginForm("Index", "Teachers", FormMethod.Post, new { @class = "form-horizontal" }))
                {


                    @*<h2><b><span style="color:darkseagreen;font-family:Calibri;font-size:large">Index for Student Registration</span></b></h2>*@
                    <p class="col-md-4 pull-right">
                        Seach By Teacher Full Name,Staff Number, @Html.TextBox("searchString", ViewBag.CurrentFilter as string, new { @class = "form-control" })
                        <input type="submit" value="Search" class="btn btn-info" />
                    </p>

                                <br />
                                <br />
                                <br />


                                <div style="color:red">
                                    @ViewBag.Nodetails
                                </div>

                                <table class="table table-striped table-bordered table-hover">
                                    <tr>
                                        <th>
                                            Staff Number
                                        </th>
                                        <th>
                                            Full Name
                                        </th>
                                        @if (User.IsInRole("Accountant"))
                                        {
                                            <th>
                                                Annual  Salary
                                            </th>
                                        }
                                        <th>
                                            Email
                                        </th>
                                        <th>
                                            phone  Number
                                        </th>
                                        <th></th>
                                    </tr>

                                    @foreach (var item in Model)
                                    {
                                        <tr>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.StaffNumber)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.FullName)
                                            </td>

                                            @if (User.IsInRole("Accountant"))
                                            {
                                                <td>
                                                    @Html.DisplayFor(modelItem => item.BasicSalary)
                                                </td>
                                            }
                                            <td>
                                                @Html.DisplayFor(modelItem => item.EmailAddress)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.PhoneNumber)
                                            </td>
                                            <td>
                                                @if (User.IsInRole("Admin"))
                                                {
                                                    @Html.ActionLink("Details", "Details", new { id = item.Id }, new { @class = "btn btn-primary btn-xs" })
                                                    @Html.ActionLink("Edit", "Edit", new { id = item.Id }, new { @class = "btn btn-warning btn-xs" })
                                                    @Html.ActionLink("Delete", "Delete", new { id = item.Id, Email = item.EmailAddress }, new { @class = "btn btn-danger btn-xs" })
                                                    @Html.ActionLink("Enter Subject", "Create", "TeacherSubjects", new { id = item.Id }, new { @class = "btn btn-primary btn-xs" })
                                                }
                                                else if (User.IsInRole("Accountant"))
                                                {
                                                    @Html.ActionLink("Details", "Details", new { id = item.Id }, new { @class = "btn btn-info btn-xs" })
                                                    @Html.ActionLink("Salary", "Create", "StaffPayrolls", new { id = item.Id }, new { @class = "btn btn-primary btn-xs" })
                                                    @Html.ActionLink("Loan", "Create", "Loans", new { id = item.Id }, new { @class = "btn btn-warning btn-xs" })
                                                    @Html.ActionLink("Bonus", "Create", "Bonuses", new { id = item.Id }, new { @class = "btn btn-info btn-xs" })
                                                    @Html.ActionLink("Deduction", "Create", "Deductions", new { id = item.Id }, new { @class = "btn btn-danger btn-xs" })
                                                }
                                                else
                                                {
                                                    @Html.ActionLink("Details", "Details", new { id = item.Id }, new { @class = "btn btn-primary btn-xs" })
                                                }

                                            </td>
                                        </tr>
                                    }

                                </table>
                }
                <br />
                Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
                @Html.PagedListPager(Model, page => Url.Action("Index",
                                    new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
            </div>
        </div>
    </div>
</div>

